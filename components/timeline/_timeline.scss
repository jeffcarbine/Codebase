:root {
  --timeline-max-width: 20rem;
  --timeline-color: var(--foreground);
  --timeline-bar-color: var(--timeline-color);
  --timeline-triangle-color: var(--timeline-color);
}

ul.timeline {
  display: flex;
  flex-direction: column;
  padding: 1rem;
  position: relative;
  margin: 0 auto;
  width: calc(100% - 2rem);
  max-width: var(--timeline-max-width);

  &::after {
    content: "";
    height: calc(100% - 2rem);
    width: 0.25rem;
    background: var(--timeline-color);
    position: absolute;
    top: 1rem;
    left: 1rem;
    border-radius: 0.5rem;
  }

  li.event {
    flex: 0 0 auto;
    display: flex;
    flex-wrap: wrap;
    margin-left: 1rem;
    padding: 1rem 1rem 1rem 2rem;
    box-sizing: border-box;
    position: relative;

    &::after {
      content: "";
      display: block;
      @include triangle($direction: left, $color: var(--timeline-bar-color));
      @include absolute-center-left();
    }

    .text {
      flex: 0 0 100%;
      padding: 1rem;
      box-sizing: border-box;
      box-shadow: var(--box-shadow);
      border-radius: var(--border-radius);
      border: 1px solid var(--border-color);
    }

    figure {
      flex: 0 0 100%;

      img {
        width: 100%;
      }
    }
  }
}

@media (min-width: $breakpoint-md) {
  :root {
    --timeline-max-width: 75vw;
  }

  ul.timeline {
    &::after {
      @include absolute-center();
    }

    li.event {
      width: calc(50% - 1rem);
      margin: 0;
      padding: 1rem;

      &:nth-of-type(n + 2) {
        margin-top: -25%;
      }

      &:nth-of-type(even) {
        margin-left: calc(50% + 1rem);
        padding-left: 3rem;
      }

      &:nth-of-type(odd) {
        margin-right: calc(50% + 1rem);
        padding-right: 3rem;

        &::after {
          left: inherit;
          @include absolute-center-right();
          @include triangle(
            $direction: right,
            $color: var(--timeline-triangle-color)
          );
        }
      }
    }

    &.full-span {
      li.event {
        margin: 0;
        padding: 1rem;
        width: 100%;
        display: flex;

        &::after {
          display: none;
        }

        figure {
          flex: 0 0 50%;
        }

        .text {
          flex: 0 0 50%;
        }
      }
    }
  }
}

@media (min-width: $breakpoint-lg) {
  :root {
    --timeline-max-width: 50rem;
  }
}
